---
import Layout from '../../layouts/Layout.astro'
import WrapperLayout from '../../layouts/WrapperLayout.vue'
import ContentLayout from '../../layouts/ContentLayout.vue'
import PostCard from '../../components/PostCard.astro'
import { getCollection } from 'astro:content'

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
)
---

<Layout title="Blog | Carlos Marques" page="blog">
  <WrapperLayout
    topic="Blog"
    title="Psycarlo's Blog"
    description="Blog posts about tech, bitcoin and life in general."
    client:load
  >
    <ContentLayout>
      <section>
        <ul class="flex flex-col gap-3">
          {
            posts.map((post) => (
              <li>
                <PostCard
                  id={post.id}
                  title={post.data.title}
                  pubDate={post.data.pubDate}
                  image={post.data.heroImage}
                />
              </li>
            ))
          }
        </ul>
      </section>
    </ContentLayout>
  </WrapperLayout>
</Layout>
